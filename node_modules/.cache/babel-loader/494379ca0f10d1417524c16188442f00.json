{"ast":null,"code":"import _toConsumableArray from \"/home/rohit/radio/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/home/rohit/radio/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/rohit/radio/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/rohit/radio/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/rohit/radio/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/rohit/radio/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/rohit/radio/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/rohit/radio/frontend/src/Components/commonview.js\";\nimport React, { Component } from 'react';\nimport { Search, Grid } from 'semantic-ui-react';\nimport ReactPlayer from 'react-player';\nimport Navbar from './navbar';\nimport Queue from './queue.js';\nimport Chat from './chat.js';\nvar API_key = 'AIzaSyALsePfmVRgtvFqd7eSjBOSM7UL_Ti2YW4';\n\nvar CommonView =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CommonView, _Component);\n\n  function CommonView(props) {\n    var _this;\n\n    _classCallCheck(this, CommonView);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CommonView).call(this, props));\n\n    _this.handleChange = function (event) {\n      _this.setState({\n        query: event.target.value\n      }, function () {\n        var message = _this.state.query;\n        var finalURL = \"https://www.googleapis.com/youtube/v3/search?part=snippet&order=viewCount&q=\".concat(message, \"&type=video&videoDefinition=high&key=\").concat(API_key, \"&maxResults=5\");\n        fetch(finalURL).then(function (response) {\n          return response.json();\n        }).then(function (responseJson) {\n          var searchResults = responseJson.items.map(function (obj) {\n            return {\n              title: obj.snippet.title,\n              description: 'Youtube search',\n              image: \"https://img.youtube.com/vi/\".concat(obj.id.videoId, \"/default.jpg\"),\n              url: \"https://www.youtube.com/watch?v=\".concat(obj.id.videoId, \"&autoplay=0\")\n            };\n          });\n\n          _this.setState({\n            results: searchResults\n          });\n        });\n      });\n    };\n\n    _this.handleQueue = function (e, _ref) {\n      var result = _ref.result;\n      var queue = _this.state.queue;\n      var new_song = {\n        title: result.title,\n        image: result.image,\n        url: result.url\n      };\n      var isOnTheList = 0;\n\n      for (var i = 0; i < queue.length; i++) {\n        if (queue[i].title === new_song.title) {\n          isOnTheList = 1;\n          break;\n        }\n      }\n\n      if (!isOnTheList) {\n        new_song !== '' && _this.setState({\n          queue: [].concat(_toConsumableArray(queue), [new_song])\n        }, function () {\n          _this.setUrl();\n        });\n      }\n    };\n\n    _this.send_data = function (e) {\n      var data = {\n        url: _this.state.url,\n        played: _this.state.played,\n        duration: _this.state.duration,\n        queue: _this.state.queue\n      };\n\n      _this.state.streamSocket.send(JSON.stringify(data));\n    };\n\n    _this.onEnd = function (event) {\n      var array = _toConsumableArray(_this.state.queue);\n\n      var index = array[0];\n      array.splice(index, 1);\n\n      _this.setState({\n        queue: array\n      }, function () {\n        _this.setUrl();\n      });\n    };\n\n    _this.ref = function (player) {\n      _this.player = player;\n    };\n\n    _this.state = {\n      streamSocket: new WebSocket(\"ws://127.0.0.1:8000/ws/stream/\".concat(_this.props.match.params.name, \"/\")),\n      chatSocket: new WebSocket(\"ws://127.0.0.1:8000/ws/chatbox/\".concat(_this.props.match.params.name, \"/\")),\n      url: null,\n      playing: true,\n      volume: 1,\n      muted: false,\n      played: 0,\n      loaded: 0,\n      duration: 0,\n      seeking: 0,\n      queue: []\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleQueue = _this.handleQueue.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.setUrl = _this.setUrl.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.send_data = _this.send_data.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onEnd = _this.onEnd.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  } //function responsible for syncing data \n\n\n  _createClass(CommonView, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var streamSocket = this.state.streamSocket;\n      var i = 0;\n\n      streamSocket.onmessage = function (e) {\n        var data = JSON.parse(e.data);\n        console.log(data['played']);\n\n        _this2.setState({\n          url: data['url'],\n          duration: data['duration'],\n          played: data['played'],\n          queue: data['queue']\n        }, function () {\n          for (; i < 1; i++) {\n            _this2.player.seekTo(_this2.state.played);\n          }\n        });\n      };\n    } //function responsible for retrieving and mapping search results\n\n  }, {\n    key: \"setUrl\",\n    //function responsible for setting url\n    value: function setUrl() {\n      var _this3 = this;\n\n      this.setState({\n        url: this.state.queue[0].url\n      }, function () {\n        _this3.send_data();\n      });\n    } //function referencing player\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          query = _this$state.query,\n          results = _this$state.results;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, React.createElement(Navbar, {\n        name: this.props.match.params.name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }), \" \"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"search\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, React.createElement(Search, {\n        size: \"huge\",\n        onSearchChange: this.handleChange,\n        results: results,\n        value: query,\n        onResultSelect: this.handleQueue,\n        style: {\n          \"width\": \"100%\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }), \" \")), React.createElement(\"div\", {\n        id: \"flex-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"VidWrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, React.createElement(ReactPlayer, {\n        ref: this.ref,\n        url: this.state.url,\n        playing: true,\n        onEnded: this.onEnd,\n        onProgress: this.onProgress,\n        volume: this.state.volume,\n        muted: this.state.muted,\n        height: \"100%\",\n        width: \"100%\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"overlay\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }, \" \"), \" \"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }, React.createElement(Chat, {\n        channel: this.props.match.params.name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }), \" \"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      }, React.createElement(Queue, {\n        queue: this.state.queue,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      }), \" \")));\n    }\n  }]);\n\n  return CommonView;\n}(Component);\n\nexport { CommonView as default };","map":{"version":3,"sources":["/home/rohit/radio/frontend/src/Components/commonview.js"],"names":["React","Component","Search","Grid","ReactPlayer","Navbar","Queue","Chat","API_key","CommonView","props","handleChange","event","setState","query","target","value","message","state","finalURL","fetch","then","response","json","responseJson","searchResults","items","map","obj","title","snippet","description","image","id","videoId","url","results","handleQueue","e","result","queue","new_song","isOnTheList","i","length","setUrl","send_data","data","played","duration","streamSocket","send","JSON","stringify","onEnd","array","index","splice","ref","player","WebSocket","match","params","name","chatSocket","playing","volume","muted","loaded","seeking","bind","onmessage","parse","console","log","seekTo","onProgress"],"mappings":"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","sourcesContent":["import React, {\n  Component\n} from 'react'\nimport {\n  Search,\n  Grid,\n} from 'semantic-ui-react'\nimport ReactPlayer from 'react-player'\nimport Navbar from './navbar'\nimport Queue from './queue.js'\nimport Chat from './chat.js'\n\nconst API_key = 'AIzaSyALsePfmVRgtvFqd7eSjBOSM7UL_Ti2YW4';\n\n\nexport default class CommonView extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      streamSocket: new WebSocket(`ws://127.0.0.1:8000/ws/stream/${this.props.match.params.name}/`),\n      chatSocket: new WebSocket(`ws://127.0.0.1:8000/ws/chatbox/${this.props.match.params.name}/`),\n      url: null,\n      playing: true,\n      volume: 1,\n      muted: false,\n      played: 0,\n      loaded: 0,\n      duration: 0,\n      seeking: 0,\n      queue: [],\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleQueue = this.handleQueue.bind(this);\n    this.setUrl = this.setUrl.bind(this)\n\n    this.send_data = this.send_data.bind(this);\n\n    this.onEnd = this.onEnd.bind(this);\n  }\n\n\n  //function responsible for syncing data \n\n  componentDidMount() {\n    const streamSocket = this.state.streamSocket;\n    let i = 0;\n    streamSocket.onmessage = (e) => {\n      let data = JSON.parse(e.data);\n      console.log(data['played'])\n      this.setState({\n          url: data['url'],\n          duration: data['duration'],\n          played: data['played'],\n          queue: data['queue']\n        },\n        () => {\n          for (; i < 1; i++) {\n            this.player.seekTo(this.state.played)\n          }\n        }\n      )\n    }\n  }\n\n\n  //function responsible for retrieving and mapping search results\n\n  handleChange = (event) => {\n\n    this.setState({\n      query: event.target.value\n    }, () => {\n\n      var message = this.state.query\n      var finalURL = `https://www.googleapis.com/youtube/v3/search?part=snippet&order=viewCount&q=${message}&type=video&videoDefinition=high&key=${API_key}&maxResults=5`;\n\n      fetch(finalURL)\n        .then((response) => response.json())\n        .then((responseJson) => {\n          const searchResults = responseJson.items.map(obj => ({\n            title: obj.snippet.title,\n            description: 'Youtube search',\n            image: `https://img.youtube.com/vi/${obj.id.videoId}/default.jpg`,\n            url: `https://www.youtube.com/watch?v=${obj.id.videoId}&autoplay=0`,\n          }));\n\n          this.setState({\n            results: searchResults\n          })\n        })\n    })\n  };\n\n\n  //function responsible for queueing\n\n  handleQueue = (e, {\n    result\n  }) => {\n    let queue = this.state.queue;\n\n    const new_song = {\n      title: result.title,\n      image: result.image,\n      url: result.url,\n    }\n\n    let isOnTheList = 0;\n\n    for (var i = 0; i < queue.length; i++) {\n      if (queue[i].title === new_song.title) {\n        isOnTheList = 1;\n        break;\n      }\n    }\n\n    if (!isOnTheList) {\n      new_song !== '' && this.setState({\n          queue: [...queue, new_song]\n        },\n        () => {\n          this.setUrl();\n        }\n      )\n    }\n  }\n\n\n  //function responsible for sending data\n\n  send_data = e => {\n\n    let data = {\n      url: this.state.url,\n      played: this.state.played,\n      duration: this.state.duration,\n      queue: this.state.queue,\n    };\n    this.state.streamSocket.send(JSON.stringify(data));\n  }\n\n\n  //function responsible for handling song end\n\n  onEnd = (event) => {\n    let array = [...this.state.queue]\n    let index = array[0]\n    array.splice(index, 1);\n\n    this.setState({\n        queue: array\n      },\n      () => {\n        this.setUrl();\n      }\n    )\n  }\n\n\n  //function responsible for setting url\n\n  setUrl() {\n    this.setState({\n        url: this.state.queue[0].url\n      },\n      () => {\n        this.send_data();\n      }\n    )\n  }\n\n\n  //function referencing player\n\n  ref = player => {\n    this.player = player\n  }\n\n\n  render() {\n    const {\n      query,\n      results,\n    } = this.state\n\n    return (\n\n      <\n      div >\n\n      <\n      div >\n      <\n      Navbar name = {\n        this.props.match.params.name\n      }\n      /> <\n      /div>\n\n      <\n      div >\n\n      <\n      div id = \"search\" >\n      <\n      Search size = \"huge\"\n      onSearchChange = {\n        this.handleChange\n      }\n      results = {\n        results\n      }\n      value = {\n        query\n      }\n      onResultSelect = {\n        this.handleQueue\n      }\n      style = {\n        {\n          \"width\": \"100%\"\n        }\n      }\n      /> <\n      /div>\n\n      <\n      /div>\n\n      <\n      div id = \"flex-container\" >\n\n      <\n      div className = \"VidWrapper\" >\n      <\n      ReactPlayer ref = {\n        this.ref\n      }\n      url = {\n        this.state.url\n      }\n      playing onEnded = {\n        this.onEnd\n      }\n      onProgress = {\n        this.onProgress\n      }\n      volume = {\n        this.state.volume\n      }\n      muted = {\n        this.state.muted\n      }\n      height = \"100%\"\n      width = \"100%\" /\n      >\n      <\n      div className = \"overlay\" > < /div> <\n      /div>\n\n\n      <\n      div >\n      <\n      Chat channel = {\n        this.props.match.params.name\n      }\n      /> <\n      /div>\n\n      <\n      div >\n      <\n      Queue queue = {\n        this.state.queue\n      }\n      /> <\n      /div>\n\n      <\n      /div>\n\n      <\n      /div>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}