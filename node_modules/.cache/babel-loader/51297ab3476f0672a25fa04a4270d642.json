{"ast":null,"code":"import _toConsumableArray from \"/home/rohit/radio/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/home/rohit/radio/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/rohit/radio/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/rohit/radio/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/rohit/radio/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/rohit/radio/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/rohit/radio/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/rohit/radio/frontend/src/Components/mastercommonview.js\";\nimport React, { Component } from 'react';\nimport ReactPlayer from 'react-player';\n\nvar MasterCommonView =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MasterCommonView, _Component);\n\n  function MasterCommonView(props) {\n    var _this;\n\n    _classCallCheck(this, MasterCommonView);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MasterCommonView).call(this, props));\n\n    _this.send_data = function (e) {\n      var data = {\n        url: _this.state.url,\n        played: _this.state.played,\n        duration: _this.state.duration,\n        queue: _this.state.queue\n      };\n\n      _this.state.streamSocket.send(JSON.stringify(data));\n    };\n\n    _this.onEnd = function (event) {\n      var array = _toConsumableArray(_this.state.queue);\n\n      var index = array[0];\n      array.splice(index, 1);\n\n      _this.setState({\n        queue: array\n      }, function () {\n        _this.setUrl();\n      });\n    };\n\n    _this.onProgress = function (state) {\n      _this.setState(state);\n\n      _this.send_data();\n    };\n\n    _this.ref = function (player) {\n      _this.player = player;\n    };\n\n    _this.state = {\n      streamSocket: new WebSocket(\"ws://127.0.0.1:8000/ws/stream/\".concat(_this.props.match.params.name, \"/\")),\n      url: null,\n      playing: true,\n      volume: 0.1,\n      muted: true,\n      played: 0,\n      loaded: 0,\n      duration: 0,\n      seeking: 0,\n      queue: []\n    };\n    _this.setUrl = _this.setUrl.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.send_data = _this.send_data.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onProgress = _this.onProgress.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onEnd = _this.onEnd.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  } //function responsible for syncing data \n\n\n  _createClass(MasterCommonView, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var streamSocket = this.state.streamSocket;\n\n      streamSocket.onmessage = function (e) {\n        var data = JSON.parse(e.data);\n\n        _this2.setState({\n          url: data['url'],\n          duration: data['duration'],\n          played: data['played'],\n          queue: data['queue']\n        });\n      };\n    } //function responsible for sending data\n\n  }, {\n    key: \"setUrl\",\n    //function responsible for setting url\n    value: function setUrl() {\n      var _this3 = this;\n\n      if (this.state.queue[0]) {\n        this.setState({\n          url: this.state.queue[0].url\n        }, function () {\n          _this3.send_data();\n        });\n      }\n    } //function defining progress of a video\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          query = _this$state.query,\n          results = _this$state.results;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"VidWrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(ReactPlayer, {\n        ref: this.ref,\n        url: this.state.url,\n        playing: true,\n        onEnded: this.onEnd,\n        onProgress: this.onProgress,\n        volume: this.state.volume,\n        muted: this.state.muted,\n        width: \"100%\",\n        height: \"100%\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return MasterCommonView;\n}(Component);\n\nexport { MasterCommonView as default };","map":{"version":3,"sources":["/home/rohit/radio/frontend/src/Components/mastercommonview.js"],"names":["React","Component","ReactPlayer","MasterCommonView","props","send_data","e","data","url","state","played","duration","queue","streamSocket","send","JSON","stringify","onEnd","event","array","index","splice","setState","setUrl","onProgress","ref","player","WebSocket","match","params","name","playing","volume","muted","loaded","seeking","bind","onmessage","parse","query","results"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,WAAP,MAAwB,cAAxB;;IAEqBC,gB;;;;;AACnB,4BAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,0FAAMA,KAAN;;AADiB,UA8CnBC,SA9CmB,GA8CP,UAAAC,CAAC,EAAG;AAEd,UAAIC,IAAI,GAAG;AACLC,QAAAA,GAAG,EAAE,MAAKC,KAAL,CAAWD,GADX;AAELE,QAAAA,MAAM,EAAE,MAAKD,KAAL,CAAWC,MAFd;AAGLC,QAAAA,QAAQ,EAAE,MAAKF,KAAL,CAAWE,QAHhB;AAILC,QAAAA,KAAK,EAAE,MAAKH,KAAL,CAAWG;AAJb,OAAX;;AAMA,YAAKH,KAAL,CAAWI,YAAX,CAAwBC,IAAxB,CAA6BC,IAAI,CAACC,SAAL,CAAeT,IAAf,CAA7B;AACD,KAvDkB;;AAAA,UA4DnBU,KA5DmB,GA4DZ,UAACC,KAAD,EAAW;AAChB,UAAIC,KAAK,sBAAO,MAAKV,KAAL,CAAWG,KAAlB,CAAT;;AACA,UAAIQ,KAAK,GAAGD,KAAK,CAAC,CAAD,CAAjB;AACAA,MAAAA,KAAK,CAACE,MAAN,CAAaD,KAAb,EAAoB,CAApB;;AAEA,YAAKE,QAAL,CAAc;AAACV,QAAAA,KAAK,EAAEO;AAAR,OAAd,EACE,YAAM;AAAC,cAAKI,MAAL;AAAe,OADxB;AAGD,KApEkB;;AAAA,UAqFnBC,UArFmB,GAqFN,UAAAf,KAAK,EAAI;AAClB,YAAKa,QAAL,CAAcb,KAAd;;AACA,YAAKJ,SAAL;AACH,KAxFkB;;AAAA,UA4FnBoB,GA5FmB,GA4Fb,UAAAC,MAAM,EAAI;AACd,YAAKA,MAAL,GAAcA,MAAd;AACD,KA9FkB;;AAGjB,UAAKjB,KAAL,GAAa;AACXI,MAAAA,YAAY,EAAE,IAAIc,SAAJ,yCAA+C,MAAKvB,KAAL,CAAWwB,KAAX,CAAiBC,MAAjB,CAAwBC,IAAvE,OADH;AAEXtB,MAAAA,GAAG,EAAE,IAFM;AAGXuB,MAAAA,OAAO,EAAE,IAHE;AAIXC,MAAAA,MAAM,EAAE,GAJG;AAKXC,MAAAA,KAAK,EAAE,IALI;AAMXvB,MAAAA,MAAM,EAAE,CANG;AAOXwB,MAAAA,MAAM,EAAE,CAPG;AAQXvB,MAAAA,QAAQ,EAAE,CARC;AASXwB,MAAAA,OAAO,EAAE,CATE;AAUXvB,MAAAA,KAAK,EAAE;AAVI,KAAb;AAaA,UAAKW,MAAL,GAAc,MAAKA,MAAL,CAAYa,IAAZ,uDAAd;AAEA,UAAK/B,SAAL,GAAiB,MAAKA,SAAL,CAAe+B,IAAf,uDAAjB;AAEA,UAAKZ,UAAL,GAAkB,MAAKA,UAAL,CAAgBY,IAAhB,uDAAlB;AACA,UAAKnB,KAAL,GAAa,MAAKA,KAAL,CAAWmB,IAAX,uDAAb;AArBiB;AAuBlB,G,CAGH;;;;;wCAEsB;AAAA;;AAClB,UAAMvB,YAAY,GAAG,KAAKJ,KAAL,CAAWI,YAAhC;;AACAA,MAAAA,YAAY,CAACwB,SAAb,GAAyB,UAAC/B,CAAD,EAAO;AAC9B,YAAIC,IAAI,GAAGQ,IAAI,CAACuB,KAAL,CAAWhC,CAAC,CAACC,IAAb,CAAX;;AACA,QAAA,MAAI,CAACe,QAAL,CACE;AACAd,UAAAA,GAAG,EAAED,IAAI,CAAC,KAAD,CADT;AAEAI,UAAAA,QAAQ,EAAEJ,IAAI,CAAC,UAAD,CAFd;AAGAG,UAAAA,MAAM,EAAEH,IAAI,CAAC,QAAD,CAHZ;AAIAK,UAAAA,KAAK,EAAEL,IAAI,CAAC,OAAD;AAJX,SADF;AAQD,OAVD;AAWD,K,CAGH;;;;AA2BA;6BAEU;AAAA;;AAEN,UAAG,KAAKE,KAAL,CAAWG,KAAX,CAAiB,CAAjB,CAAH,EAAuB;AACrB,aAAKU,QAAL,CAAc;AAACd,UAAAA,GAAG,EAAE,KAAKC,KAAL,CAAWG,KAAX,CAAiB,CAAjB,EAAoBJ;AAA1B,SAAd,EACE,YAAM;AAAC,UAAA,MAAI,CAACH,SAAL;AAAkB,SAD3B;AAGD;AACF,K,CAGH;;;;6BAcW;AAAA,wBACmB,KAAKI,KADxB;AAAA,UACA8B,KADA,eACAA,KADA;AAAA,UACOC,OADP,eACOA,OADP;AAGP,aAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEE;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,WAAD;AACE,QAAA,GAAG,EAAE,KAAKf,GADZ;AAEE,QAAA,GAAG,EAAE,KAAKhB,KAAL,CAAWD,GAFlB;AAGE,QAAA,OAAO,MAHT;AAIE,QAAA,OAAO,EAAE,KAAKS,KAJhB;AAKE,QAAA,UAAU,EAAE,KAAKO,UALnB;AAME,QAAA,MAAM,EAAE,KAAKf,KAAL,CAAWuB,MANrB;AAOE,QAAA,KAAK,EAAE,KAAKvB,KAAL,CAAWwB,KAPpB;AAQE,QAAA,KAAK,EAAC,MARR;AASE,QAAA,MAAM,EAAC,MATT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAFF,CAFF;AAqBD;;;;EA1H2ChC,S;;SAAzBE,gB","sourcesContent":["import React, {Component} from 'react'\nimport ReactPlayer from 'react-player'\n\nexport default class MasterCommonView extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      streamSocket: new WebSocket(`ws://127.0.0.1:8000/ws/stream/${this.props.match.params.name}/`),\n      url: null ,\n      playing: true,\n      volume: 0.1,\n      muted: true,\n      played: 0,\n      loaded: 0,\n      duration: 0,\n      seeking: 0,\n      queue: [],\n    };\n\n    this.setUrl = this.setUrl.bind(this)\n\n    this.send_data = this.send_data.bind(this);\n\n    this.onProgress = this.onProgress.bind(this);\n    this.onEnd = this.onEnd.bind(this);\n\n  }\n\n\n//function responsible for syncing data \n\n  componentDidMount() {\n    const streamSocket = this.state.streamSocket;\n    streamSocket.onmessage = (e) => {\n      let data = JSON.parse(e.data);\n      this.setState(\n        {\n        url: data['url'],\n        duration: data['duration'],\n        played: data['played'],\n        queue: data['queue']\n        }\n      )\n    }\n  }\n\n\n//function responsible for sending data\n\n  send_data = e =>{\n\n    let data = {\n          url: this.state.url,\n          played: this.state.played,\n          duration: this.state.duration,\n          queue: this.state.queue,\n    };\n    this.state.streamSocket.send(JSON.stringify(data));\n  }\n\n\n//function responsible for handling song end\n\n  onEnd= (event) => {\n    let array = [...this.state.queue]\n    let index = array[0]\n    array.splice(index, 1);\n\n    this.setState({queue: array}, \n      () => {this.setUrl();}\n    )\n  }\n\n\n//function responsible for setting url\n\n  setUrl(){\n\n    if(this.state.queue[0]){\n      this.setState({url: this.state.queue[0].url},\n        () => {this.send_data();}\n      )\n    }\n  }\n\n\n//function defining progress of a video\n\n  onProgress = state => {\n      this.setState(state);\n      this.send_data();\n  }\n\n//function referencing player\n\n  ref = player => {\n    this.player = player\n  }\n\n    \n  render() {\n    const {query, results,} = this.state\n\n    return (\n\n      <div>\n\n        <div className=\"VidWrapper\">\n          <ReactPlayer\n            ref={this.ref} \n            url={this.state.url} \n            playing\n            onEnded={this.onEnd}\n            onProgress={this.onProgress}\n            volume={this.state.volume}\n            muted={this.state.muted}\n            width=\"100%\"\n            height=\"100%\"\n          />\n        </div>\n\n      </div>\n           \n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}