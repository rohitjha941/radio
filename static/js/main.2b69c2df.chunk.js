(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{215:function(e,t,a){e.exports=a(378)},220:function(e,t,a){},221:function(e,t,a){},360:function(e,t,a){},377:function(e,t,a){},378:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(50),l=a.n(r),o=(a(220),a(221),a(19)),i=a(20),u=a(22),s=a(21),m=a(23),d=a(33),h=a(53),p=a(15),b=a(91),v=a.n(b),f="ws://wavify.herokuapp.com",E=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(s.a)(t).call(this,e))).send_data=function(e){var t={url:a.state.url,played:a.state.played,duration:a.state.duration,queue:a.state.queue};a.state.streamSocket.send(JSON.stringify(t))},a.onEnd=function(e){var t=Object(h.a)(a.state.queue),n=t[0];t.splice(n,1),a.setState({queue:t},function(){a.setUrl()})},a.onProgress=function(e){a.setState(e),a.send_data()},a.ref=function(e){a.player=e},a.state={streamSocket:new WebSocket(f+"/ws/stream/".concat(a.props.match.params.name,"/")),url:null,playing:!0,volume:.1,muted:!0,played:0,loaded:0,duration:0,seeking:0,queue:[]},a.setUrl=a.setUrl.bind(Object(p.a)(Object(p.a)(a))),a.send_data=a.send_data.bind(Object(p.a)(Object(p.a)(a))),a.onProgress=a.onProgress.bind(Object(p.a)(Object(p.a)(a))),a.onEnd=a.onEnd.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.state.streamSocket.onmessage=function(t){var a=JSON.parse(t.data);e.setState({url:a.url,duration:a.duration,played:a.played,queue:a.queue})}}},{key:"setUrl",value:function(){var e=this;this.state.queue[0]&&this.setState({url:this.state.queue[0].url},function(){e.send_data()})}},{key:"render",value:function(){var e=this.state;e.query,e.results;return c.a.createElement("div",null,c.a.createElement("div",{className:"VidWrapper"},c.a.createElement(v.a,{ref:this.ref,url:this.state.url,playing:!0,onEnded:this.onEnd,onProgress:this.onProgress,volume:this.state.volume,muted:this.state.muted,width:"100%",height:"100%"})))}}]),t}(n.Component),O=a(389),j=a(388),y=a(387),g=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(s.a)(t).call(this,e))).handleItemClick=function(e,t){var n=t.name;a.setState({activeItem:n}),window.location="/channel/".concat(n)},a.state={activeItem:"".concat(a.props.name)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.activeItem;return c.a.createElement("div",{className:"Navbar"},c.a.createElement(j.a,{attached:"top",inverted:!0,color:"violet",size:"huge"},c.a.createElement(j.a.Menu,{position:"left"},c.a.createElement(d.b,{to:"/channel/home"},c.a.createElement(j.a.Item,{name:"home",active:"home"===e,onClick:this.handleItemClick})),c.a.createElement(d.b,{to:"/channel/pop"},c.a.createElement(j.a.Item,{name:"pop",active:"pop"===e,onClick:this.handleItemClick})),c.a.createElement(d.b,{to:"/channel/rock"},c.a.createElement(j.a.Item,{name:"rock",active:"rock"===e,onClick:this.handleItemClick})),c.a.createElement(d.b,{to:"/channel/romance"},c.a.createElement(j.a.Item,{name:"romance",active:"romance"===e,onClick:this.handleItemClick})),c.a.createElement(d.b,{to:"/channel/bollywood"},c.a.createElement(j.a.Item,{name:"bollywood",active:"bollywood"===e,onClick:this.handleItemClick}))),c.a.createElement(j.a.Menu,{position:"right"},c.a.createElement(j.a.Item,null,c.a.createElement(y.a,{icon:"bars"},c.a.createElement(y.a.Menu,null,c.a.createElement(y.a.Item,{text:"Logout"})))))))}}]),t}(n.Component),k=a(386),w=a(392),q=a(206),S=a(390),C=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){console.log(this.props.queue);var e=this.props.queue;console.log("q: "+e);var t=e.map(function(e){return c.a.createElement(k.a.Row,null,c.a.createElement(k.a.Cell,null,c.a.createElement(w.a,{as:"h3",image:!0},c.a.createElement(q.a,{src:e.image,rounded:!0,size:"massive"}),c.a.createElement(w.a.Content,null,c.a.createElement("div",{className:"song"},e.title)))))});return c.a.createElement("div",{style:{height:"55vh"},id:"queue"},c.a.createElement(w.a,{as:"h3",attached:"top"},"Yet to come . . ."),c.a.createElement(S.a,{style:{height:"49vh",overflow:"auto"},attached:!0},c.a.createElement(k.a,{basic:"very",celled:!0,collapsing:!0},c.a.createElement(k.a.Body,null,t))))}}]),t}(c.a.Component),I=a(385),N=a(379),P=(c.a.Component,a(360),"AIzaSyALsePfmVRgtvFqd7eSjBOSM7UL_Ti2YW4"),_=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(s.a)(t).call(this,e))).handleChange=function(e){a.setState({query:e.target.value},function(){var e=a.state.query,t="https://www.googleapis.com/youtube/v3/search?part=snippet&order=viewCount&q=".concat(e,"&type=video&videoDefinition=high&key=").concat(P,"&maxResults=5");fetch(t).then(function(e){return e.json()}).then(function(e){var t=e.items.map(function(e){return{title:e.snippet.title,description:"Youtube search",image:"https://img.youtube.com/vi/".concat(e.id.videoId,"/default.jpg"),url:"https://www.youtube.com/watch?v=".concat(e.id.videoId,"&autoplay=0")}});a.setState({results:t})})})},a.handleQueue=function(e,t){for(var n=t.result,c=a.state.queue,r={title:n.title,image:n.image,url:n.url},l=0,o=0;o<c.length;o++)if(c[o].title===r.title){l=1;break}l||""!==r&&a.setState({queue:[].concat(Object(h.a)(c),[r])},function(){a.setUrl()})},a.send_data=function(e){var t={url:a.state.url,played:a.state.played,duration:a.state.duration,queue:a.state.queue};a.state.streamSocket.send(JSON.stringify(t))},a.onEnd=function(e){var t=Object(h.a)(a.state.queue),n=t[0];t.splice(n,1),a.setState({queue:t},function(){a.setUrl()})},a.ref=function(e){a.player=e},a.state={streamSocket:new WebSocket("ws://127.0.0.1:8000/ws/stream/".concat(a.props.match.params.name,"/")),chatSocket:new WebSocket("ws://127.0.0.1:8000/ws/chatbox/".concat(a.props.match.params.name,"/")),url:null,playing:!0,volume:1,muted:!1,played:0,loaded:0,duration:0,seeking:0,queue:[]},a.handleChange=a.handleChange.bind(Object(p.a)(Object(p.a)(a))),a.handleQueue=a.handleQueue.bind(Object(p.a)(Object(p.a)(a))),a.setUrl=a.setUrl.bind(Object(p.a)(Object(p.a)(a))),a.send_data=a.send_data.bind(Object(p.a)(Object(p.a)(a))),a.onEnd=a.onEnd.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.streamSocket,a=0;t.onmessage=function(t){var n=JSON.parse(t.data);console.log(n.played),e.setState({url:n.url,duration:n.duration,played:n.played,queue:n.queue},function(){for(;a<1;a++)e.player.seekTo(e.state.played)})}}},{key:"setUrl",value:function(){var e=this;this.setState({url:this.state.queue[0].url},function(){e.send_data()})}},{key:"render",value:function(){var e=this.state,t=e.query,a=e.results;return c.a.createElement(c.a.Fragment,null,c.a.createElement(g,{name:this.props.match.params.name}),c.a.createElement("div",{className:"parent"},c.a.createElement("div",null,c.a.createElement("div",{id:"search"},c.a.createElement(O.a,{onSearchChange:this.handleChange,results:a,value:t,onResultSelect:this.handleQueue,style:{width:"100%"}})," ")),c.a.createElement("div",{id:"flex-container"},c.a.createElement("div",{className:"VidWrapper"},c.a.createElement(v.a,{ref:this.ref,url:this.state.url,playing:!0,onEnded:this.onEnd,onProgress:this.onProgress,volume:this.state.volume,muted:this.state.muted,height:"100%",width:"100%"}),c.a.createElement("div",{className:"overlay"}," ")," "),c.a.createElement("div",null,c.a.createElement(C,{queue:this.state.queue})," "))))}}]),t}(n.Component),U=a(51),x=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null)}}]),t}(n.Component),W=(a(377),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"home"},c.a.createElement("div",{className:"back_img"}," "),c.a.createElement("center",null,c.a.createElement("h1",null,"Music. ",c.a.createElement("br",null)," For The People.By the People.With the People."," "),c.a.createElement(d.c,{to:"/channel/home"},c.a.createElement("button",null,"Wavify ")," ")," "))}}]),t}(n.Component)),M=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return c.a.createElement("main",null,c.a.createElement(U.c,null,c.a.createElement(U.a,{exact:!0,path:"/login",component:x}),c.a.createElement(U.a,{exact:!0,path:"/Home",component:W}),c.a.createElement(U.a,{exact:!0,path:"/",component:W}),c.a.createElement(U.a,{path:"/channel/:name",key:"/channel/:name",component:_}),c.a.createElement(U.a,{path:"/master/channel/:name",key:"/channel/:name",component:E})))}}]),t}(n.Component),J=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return c.a.createElement(d.a,null,c.a.createElement(M,null))}}]),t}(n.Component);l.a.render(c.a.createElement(J,null),document.getElementById("root"))}},[[215,1,2]]]);
//# sourceMappingURL=main.2b69c2df.chunk.js.map